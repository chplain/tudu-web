var Lang={year:"\u5e74",month:{zh_CN:"\u6708",zh_TW:"\u6708",en_US:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"Setptember",10:"October",11:"November",12:"December"}},day:"\u65e5",date:{1:"1st",2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th",7:"7th",8:"8th",9:"9th",10:"10th",11:"11st",12:"12nd",13:"13rd",14:"14th",15:"15th",16:"16th",17:"17th",18:"18th",19:"19th",20:"20th",21:"21st",22:"22nd",23:"23rd",24:"24th",25:"25th",26:"26th",27:"27th",28:"28th",29:"29th",30:"30th",31:"31st"},week:{0:"\u661f\u671f\u65e5",1:"\u661f\u671f\u4e00",2:"\u661f\u671f\u4e8c",3:"\u661f\u671f\u4e09",4:"\u661f\u671f\u56db",5:"\u661f\u671f\u4e94",6:"\u661f\u671f\u516d"},en_week:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},lunar:{zh_TW:"\u8fb2\u66c6",zh_CN:"\u519c\u5386"},dateNumber:{1:"\u521d\u4e00",2:"\u521d\u4e8c",3:"\u521d\u4e09",4:"\u521d\u56db",5:"\u521d\u4e94",6:"\u521d\u516d",7:"\u521d\u4e03",8:"\u521d\u516b",9:"\u521d\u4e5d",10:"\u521d\u5341",11:"\u5341\u4e00",12:"\u5341\u4e8c",13:"\u5341\u4e09",14:"\u5341\u56db",15:"\u5341\u4e94",16:"\u5341\u516d",17:"\u5341\u4e03",18:"\u5341\u516b",19:"\u5341\u4e5d",20:"\u4e8c\u5341",21:"\u5eff\u4e00",22:"\u5eff\u4e8c",23:"\u5eff\u4e09",24:"\u5eff\u56db",25:"\u5eff\u4e94",26:"\u5eff\u516d",27:"\u5eff\u4e03",28:"\u5eff\u516b",29:"\u5eff\u4e5d",30:"\u4e09\u5341",31:"\u4e09\u5341\u4e00"},monthNumber:{1:"\u6b63",2:"\u4e8c",3:"\u4e09",4:"\u56db",5:"\u4e94",6:"\u516d",7:"\u4e03",8:"\u516b",9:"\u4e5d",10:"\u5341",11:"\u5341\u4e00",12:"\u5341\u4e8c"}};var Lunar=function(a){this._settings={};this.setParam(a);this.init()};Lunar.defaultSettings={lang:"zh_CN",firstYear:1998,lastYear:2031,dateTo:null,lunarTo:null,hoursTo:null,minutesTo:null,lunarCal:[new tagLunarCal(27,5,3,43,1,0,0,1,0,0,1,1,0,1,1,0,1),new tagLunarCal(46,0,4,48,1,0,0,1,0,0,1,0,1,1,1,0,1),new tagLunarCal(35,0,5,53,1,1,0,0,1,0,0,1,0,1,1,0,1),new tagLunarCal(23,4,0,59,1,1,0,1,0,1,0,0,1,0,1,0,1),new tagLunarCal(42,0,1,4,1,1,0,1,0,1,0,0,1,0,1,0,1),new tagLunarCal(31,0,2,9,1,1,0,1,1,0,1,0,0,1,0,1,0),new tagLunarCal(21,2,3,14,0,1,0,1,1,0,1,0,1,0,1,0,1),new tagLunarCal(39,0,5,20,0,1,0,1,0,1,1,0,1,0,1,0,1),new tagLunarCal(28,7,6,25,1,0,1,0,1,0,1,0,1,1,0,1,1),new tagLunarCal(48,0,0,30,0,0,1,0,0,1,0,1,1,1,0,1,1),new tagLunarCal(37,0,1,35,1,0,0,1,0,0,1,0,1,1,0,1,1),new tagLunarCal(25,5,3,41,1,1,0,0,1,0,0,1,0,1,0,1,1),new tagLunarCal(44,0,4,46,1,0,1,0,1,0,0,1,0,1,0,1,1),new tagLunarCal(33,0,5,51,1,0,1,1,0,1,0,0,1,0,1,0,1),new tagLunarCal(22,4,6,56,1,0,1,1,0,1,0,1,0,1,0,1,0),new tagLunarCal(40,0,1,2,1,0,1,1,0,1,0,1,0,1,0,1,0),new tagLunarCal(30,9,2,7,0,1,0,1,0,1,0,1,1,0,1,0,1),new tagLunarCal(49,0,3,12,0,1,0,0,1,0,1,1,1,0,1,0,1),new tagLunarCal(38,0,4,17,1,0,1,0,0,1,0,1,1,0,1,1,0),new tagLunarCal(27,6,6,23,0,1,0,1,0,0,1,0,1,0,1,1,1),new tagLunarCal(46,0,0,28,0,1,0,1,0,0,1,0,1,0,1,1,0),new tagLunarCal(35,0,1,33,0,1,1,0,1,0,0,1,0,0,1,1,0),new tagLunarCal(24,4,2,38,0,1,1,1,0,1,0,0,1,0,1,0,1),new tagLunarCal(42,0,4,44,0,1,1,0,1,0,1,0,1,0,1,0,1),new tagLunarCal(31,0,5,49,1,0,1,0,1,1,0,1,0,1,0,1,0),new tagLunarCal(21,2,6,54,0,1,0,1,0,1,0,1,1,0,1,0,1),new tagLunarCal(40,0,0,59,0,1,0,0,1,0,1,1,0,1,1,0,1),new tagLunarCal(28,6,2,5,1,0,1,0,0,1,0,1,0,1,1,1,0),new tagLunarCal(47,0,3,10,1,0,1,0,0,1,0,0,1,1,1,0,1),new tagLunarCal(36,0,4,15,1,1,0,1,0,0,1,0,0,1,1,0,1),new tagLunarCal(25,5,5,20,1,1,1,0,1,0,0,1,0,0,1,1,0),new tagLunarCal(43,0,0,26,1,1,0,1,0,1,0,1,0,0,1,0,1),new tagLunarCal(32,0,1,31,1,1,0,1,1,0,1,0,1,0,1,0,0),new tagLunarCal(22,3,2,36,0,1,1,0,1,0,1,1,0,1,0,1,0)]};Lunar.prototype={solarYear:null,solarMonth:null,solarDate:null,solarHours:null,solarMinutes:null,solarCal:[31,28,31,30,31,30,31,31,30,31,30,31],solarDays:[0,31,59,90,120,151,181,212,243,273,304,334,365,396,0,31,60,91,121,152,182,213,244,274,305,335,366,397],init:function(){var a=this,b=new Date();a.solarYear=a.getFullYear(b);a.solarMonth=b.getMonth()+1;a.solarDate=b.getDate();a.solarHours=b.getHours();a.solarMinutes=b.getMinutes();if(a._settings.hoursTo!=null){a.setTime(a._settings.hoursTo,"hours")}if(a._settings.minutesTo!=null){a.setTime(a._settings.minutesTo,"minutes")}if(a._settings.dateTo!=null){a.appendDate()}if(a._settings.lang!="en_US"&&a._settings.lunarTo!=null){if(a.solarYear>=a._settings.firstYear&&a.solarYear<=a._settings.lastYear){a.appendLunar()}}},setTime:function(g,e){var b=this,c=0,f=0;if(e=="hours"){var a=String(b.solarHours);if(a.length<2){a="0"+a}c=a.substring(0,1);f=a.substring(1,2)}else{if(e=="minutes"){var d=String(b.solarMinutes);if(d.length<2){d="0"+d}c=d.substring(0,1);f=d.substring(1,2)}}g.find(".time_number:first").removeClass("number_0").addClass("number_"+c);g.find(".time_number:last").removeClass("number_0").addClass("number_"+f)},appendLunar:function(){var a=this,c=a._settings.lang,l=Lang.lunar[c],h=null,m=null,e=null,o=null,k=null,b=null,f=null,n=null;h=a.solarMonth-1;if(h<0||h>11){return false}e=a.getLeap(a.solarYear);if(h==1){m=e+28}else{m=a.solarCal[h]}if(a.solarDate<1||a.solarDate>m){return false}o=a.solarYear-a._settings.firstYear;k=a.solarDays[e*14+h]+a.solarDate;if(k<=a._settings.lunarCal[o].baseDays){o--;b=a.solarYear-1;e=a.getLeap(b);h+=12;k=a.solarDays[e*14+h]+a.solarDate}else{b=a.solarYear}var j=a._settings.lunarCal[o].baseDays;for(i=0;i<13;i++){var g=j+a._settings.lunarCal[o].monthDays[i]+29;if(k<=g){break}j=g}f=i+1;n=k-j;im=a._settings.lunarCal[o].intercalation;if(im!=0&&f>im){f--;if(f==im){f=-im}}if(f>12){f-=12}if(f<0){l+="\u95f0"}f=f.toString().replace("-","");l+=Lang.monthNumber[f];l+=Lang.month[c];l+=Lang.dateNumber[n];a._settings.lunarTo.html(l)},appendDate:function(){var a=this,c=a.getDateInfo(),d=a._settings.lang,b=null;if(d=="en_US"){b=Lang.date[c.day];b+="&nbsp;";b+=Lang.month[d][c.month];b+=",&nbsp;";b+=c.year;b+="&nbsp;";b+=Lang.en_week[c.week]}else{b=c.year;b+=Lang.year;b+=c.month;b+=Lang.month[d];b+=c.day;b+=Lang.day;b+="&nbsp;&nbsp;";b+=Lang.week[c.week]}a._settings.dateTo.html(b)},setParam:function(a,c){var b=null;if(typeof(a)=="object"){b=a}else{if(typeof(a)=="string"&&c){b={};b[a]=c}}if(null==b){return}this._settings=$.extend({},Lunar.defaultSettings,b)},getDateInfo:function(){var a=new Date();return{year:this.getFullYear(a),month:a.getMonth()+1,day:a.getDate(),week:a.getDay()}},getLeap:function(a){if(a%400==0){return 1}else{if(a%100==0){return 0}else{if(a%4==0){return 1}else{return 0}}}},getFullYear:function(a){var b=a.getYear();if(b<1000){b+=1900}return b}};function tagLunarCal(l,c,p,a,t,s,r,q,o,n,m,j,h,g,f,e,b){this.baseDays=l;this.intercalation=c;this.baseWeekday=p;this.baseKanChih=a;this.monthDays=[t,s,r,q,o,n,m,j,h,g,f,e,b]};
