var BoardList={lang:{expand:"[\u5c55\u5f00\u5206\u533a]",collapse:"[\u6536\u8d77\u5206\u533a]"},setLang:function(c){var a=this;for(var b in c){a.lang[b]=c[b]}},init:function(){var b=TOP.Cookie.get("BOARDHIDE");if(b!==null){b=b.split(",");for(var c=0;c<b.length;c++){this.toggle("b-"+b[c])}}this.remarkSort();var a=this;$("#z-myboard").each(function(){$(this).find('.board_body a[name="up"]').bind("click",function(){var d=$(this).parents("div.category_2").attr("id").replace("my-","");a.sortAttentionBoard(this,d,"up")});$(this).find('.board_body a[name="down"]').bind("click",function(){var d=$(this).parents("div.category_2").attr("id").replace("my-","");a.sortAttentionBoard(this,d,"down")})});$(".board a.arr_up").bind("mouseover",function(d){TOP.stopEventBuddle(d);$(this).addClass("arr_up_hover")}).bind("mouseout",function(d){TOP.stopEventBuddle(d);$(this).removeClass("arr_up_hover")}).bind("click",function(f){if(!$(this).hasClass("arr_up_disabled")){var g=$(this).parents("div.board").attr("id").replace("z-","");var d=$(this).parents("div.board").prev().attr("id").replace("z-","");a.sortBoard(this,g,d,"up","zone")}});$(".board a.arr_down").bind("mouseover",function(d){TOP.stopEventBuddle(d);$(this).addClass("arr_down_hover")}).bind("mouseout",function(d){TOP.stopEventBuddle(d);$(this).removeClass("arr_down_hover")}).bind("click",function(f){if(!$(this).hasClass("arr_down_disabled")){var g=$(this).parents("div.board").attr("id").replace("z-","");var d=$(this).parents("div.board").next().attr("id").replace("z-","");a.sortBoard(this,g,d,"down","zone")}});$(".board:not(.attention)").each(function(){$(this).find('.board_body a[name="up"]').bind("click",function(){if(!$(this).hasClass("gray")){var e=$(this).parents("div.category_2").attr("id");var d=$(this).parents("div.category_2").prev().attr("id");a.sortBoard(this,e,d,"up","board")}});$(this).find('.board_body a[name="down"]').bind("click",function(){if(!$(this).hasClass("gray")){var e=$(this).parents("div.category_2").attr("id");var d=$(this).parents("div.category_2").next().attr("id");a.sortBoard(this,e,d,"down","board")}})})},sortBoard:function(e,f,b,c,d){if($(e).hasClass("arr_down_disabled")||$(e).hasClass("arr_up_disabled")||$(e).hasClass("gray")){return}var a=this;$.ajax({type:"POST",dataType:"json",url:"/board/sort",data:{bid:f.replace("_","^"),objid:b.replace("_","^"),sort:c},success:function(g){if(g.success){if(d=="zone"){var h=$("#z-"+f)}else{var h=$("#"+f)}if(c=="up"){h.insertBefore(h.prev())}else{if(c=="down"){h.insertAfter(h.next())}}a.remarkSort()}},error:function(g){TOP.showMessage(TOP.TEXT.PROCESS_ERROR)}})},sortAttentionBoard:function(c,d,b){if($(c).hasClass("gray")){return}var a=this;$.ajax({type:"POST",dataType:"json",url:"/board/sort.attention",data:{bid:d.replace("_","^"),type:b},success:function(e){if(e.success){var f=TOP.getJQ();item=$("#my-"+d),list=f("#b_"+d);if(b=="up"){item.insertBefore(item.prev());list.insertBefore(list.prev())}else{if(b=="down"){item.insertAfter(item.next());list.insertAfter(list.next())}}a.remarkSort()}},error:function(e){TOP.showMessage(TOP.TEXT.PROCESS_ERROR)}})},remarkSort:function(){$(".board a.gray").removeClass("gray");$(".board a.arr_up").removeClass("arr_up_disabled");$(".board a.arr_down").removeClass("arr_down_disabled");$(".board").each(function(){$(this).find('.board_body a[name="up"]:first').addClass("gray");$(this).find('.board_body a[name="down"]:last').addClass("gray")});$(".board a.arr_up:first").addClass("arr_up_disabled");$(".board a.arr_down:last").addClass("arr_down_disabled")},showAll:function(){$("div.board div.fold a").removeClass("icon_unfold");$("div.board_body").show();$("div.board_body .category_2").show();this.checkExpand();this.setCookie()},toggle:function(a){$("#"+a+"-icon").toggleClass("icon_unfold");$("#"+a).toggle();this.checkExpand();this.setCookie()},toggleAll:function(){if(!$("div.board_body:visible").size()){$("div.board div.fold a").removeClass("icon_unfold");$("div.board_body").show()}else{$("div.board div.fold a").addClass("icon_unfold");$("div.board_body").hide()}this.checkExpand();this.setCookie()},checkExpand:function(){var a=this;if(!$("div.board_body:visible").size()){$("#toggle-all").text(a.lang.expand)}else{$("#toggle-all").text(a.lang.collapse)}},setCookie:function(){var a=[];$(".board").find("a.icon_fold").each(function(){if($(this).hasClass("icon_unfold")){a.push($(this).attr("_bid"))}});if(a.length<=0){a=null}else{a=a.join(",")}TOP.Cookie.set("BOARDHIDE",a)}};
